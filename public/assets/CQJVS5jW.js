import{r as m,e as v,f as j,c as a,a as t,g as u,u as i,t as r,h as _,v as B,i as b,j as R,F as h,k,l as D,o as n,n as U}from"./CXEZLcEQ.js";import{u as V}from"./_3XIv0p6.js";const $={class:"gradient-bg py-16"},z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center"},I={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-3xl mx-auto"},N={class:"bg-white/20 backdrop-blur-sm rounded-lg p-6 text-white fade-in-up",style:{"animation-delay":"0.4s"}},S={class:"text-3xl font-bold"},T={class:"bg-white/20 backdrop-blur-sm rounded-lg p-6 text-white fade-in-up",style:{"animation-delay":"0.6s"}},A={class:"text-3xl font-bold"},F={class:"bg-white/20 backdrop-blur-sm rounded-lg p-6 text-white fade-in-up",style:{"animation-delay":"0.8s"}},q={class:"text-3xl font-bold"},E={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},H={class:"mb-8"},Q={class:"flex flex-col md:flex-row gap-4 mb-6"},G={class:"flex-1 relative"},J={class:"text-gray-600"},K={key:0,class:"text-center py-12"},O={key:1,class:"text-center py-12"},P={class:"text-red-600 mb-4"},W={class:"text-gray-600 mt-2"},X={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Y=["onClick"],Z={class:"flex items-start justify-between mb-4"},tt={class:"flex-1"},et={class:"text-lg font-semibold text-gray-900 mb-1"},st={key:0,class:"text-sm text-gray-500 mb-2"},ot={key:1,class:"text-sm text-gray-600"},lt={key:0,class:"flex-shrink-0"},at={key:0,class:"mb-4"},nt={class:"flex flex-wrap gap-1"},it={key:0,class:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full"},rt={class:"flex justify-between items-center text-sm text-gray-600"},dt={key:0},ut={key:3,class:"text-center py-12"},pt={__name:"index",setup(ct){V({title:"研究者一覧 - 大阪大学研究マッチングシステム",meta:[{name:"description",content:"AI技術を活用した研究者マッチングシステムの研究者一覧ページ"}]});const d=m(null),x=m(!0),p=m(null),c=m(""),g=m("name"),w=async()=>{try{x.value=!0;const e=`${D().public.baseURL||"/"}data/researchers_index.json`.replace("//","/");console.log("Loading data from:",e);const o=await $fetch(e);d.value=o}catch(l){console.error("Data loading error:",l),p.value="データの読み込みに失敗しました: "+l.message}finally{x.value=!1}},C=v(()=>{var l;return(l=d.value)!=null&&l.researchers?d.value.researchers.reduce((s,e)=>s+e.total_matches,0):0}),L=v(()=>{var e;if(!((e=d.value)!=null&&e.researchers))return 0;const l=d.value.researchers.filter(o=>o.max_similarity>0);if(l.length===0)return 0;const s=l.reduce((o,y)=>o+y.max_similarity,0)/l.length;return Math.round(s*100)}),f=v(()=>{var s;if(!((s=d.value)!=null&&s.researchers))return[];let l=d.value.researchers;if(c.value){const e=c.value.toLowerCase();l=l.filter(o=>o.name.toLowerCase().includes(e)||o.name_en&&o.name_en.toLowerCase().includes(e)||o.affiliation&&o.affiliation.toLowerCase().includes(e)||o.keywords&&o.keywords.some(y=>y.toLowerCase().includes(e)))}return l.sort((e,o)=>{switch(g.value){case"similarity":return(o.max_similarity||0)-(e.max_similarity||0);case"matches":return o.total_matches-e.total_matches;default:return e.name.localeCompare(o.name,"ja")}}),l}),M=l=>{l.has_data&&(console.log("Navigating to researcher ID:",l.researcher_id),U(`/researcher/${l.researcher_id}`))};return j(()=>{w()}),(l,s)=>(n(),a("div",null,[t("section",$,[t("div",z,[s[5]||(s[5]=t("h1",{class:"text-4xl font-bold text-white mb-4 fade-in-up"}," 研究マッチングシステム ",-1)),s[6]||(s[6]=t("p",{class:"text-xl text-blue-100 mb-8 fade-in-up",style:{"animation-delay":"0.2s"}}," AI技術を活用した研究者間のコラボレーション提案 ",-1)),i(d)?(n(),a("div",I,[t("div",N,[t("div",S,r(i(d).total_researchers),1),s[2]||(s[2]=t("div",{class:"text-blue-100"},"研究者",-1))]),t("div",T,[t("div",A,r(i(C)),1),s[3]||(s[3]=t("div",{class:"text-blue-100"},"マッチング結果",-1))]),t("div",F,[t("div",q,r(i(L))+"%",1),s[4]||(s[4]=t("div",{class:"text-blue-100"},"平均マッチ度",-1))])])):u("",!0)])]),t("section",E,[t("div",H,[t("div",Q,[t("div",G,[_(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>b(c)?c.value=e:null),type:"text",placeholder:"研究者名、所属、キーワードで検索...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[B,i(c)]]),s[7]||(s[7]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),_(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>b(g)?g.value=e:null),class:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},s[8]||(s[8]=[t("option",{value:"name"},"名前順",-1),t("option",{value:"similarity"},"マッチ度順",-1),t("option",{value:"matches"},"マッチング数順",-1)]),512),[[R,i(g)]])]),t("p",J,r(i(f).length)+"件の研究者が見つかりました ",1)]),i(x)?(n(),a("div",K,s[9]||(s[9]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"データを読み込み中...",-1)]))):i(p)?(n(),a("div",O,[t("div",P,[s[10]||(s[10]=t("svg",{class:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s[11]||(s[11]=t("h3",{class:"text-lg font-medium"},"データの読み込みに失敗しました",-1)),t("p",W,r(i(p)),1)])])):(n(),a("div",X,[(n(!0),a(h,null,k(i(f),e=>(n(),a("div",{key:e.name,class:"card-hover fade-in-up",onClick:o=>M(e)},[t("div",Z,[t("div",tt,[t("h3",et,r(e.name),1),e.name_en?(n(),a("p",st,r(e.name_en),1)):u("",!0),e.affiliation?(n(),a("p",ot,r(e.affiliation),1)):u("",!0)]),e.has_data?(n(),a("div",lt,s[12]||(s[12]=[t("div",{class:"w-3 h-3 bg-green-400 rounded-full"},null,-1)]))):u("",!0)]),e.keywords&&e.keywords.length?(n(),a("div",at,[t("div",nt,[(n(!0),a(h,null,k(e.keywords.slice(0,5),o=>(n(),a("span",{key:o,class:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},r(o),1))),128)),e.keywords.length>5?(n(),a("span",it," +"+r(e.keywords.length-5)+"個 ",1)):u("",!0)])])):u("",!0),t("div",rt,[t("span",null,"マッチング: "+r(e.total_matches)+"件",1),e.max_similarity?(n(),a("span",dt," 最高マッチ度: "+r(Math.round(e.max_similarity*100))+"% ",1)):u("",!0)])],8,Y))),128))])),!i(x)&&!i(p)&&i(f).length===0?(n(),a("div",ut,s[13]||(s[13]=[t("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"検索結果が見つかりませんでした",-1),t("p",{class:"text-gray-600"},"別のキーワードで検索してみてください。",-1)]))):u("",!0)])]))}};export{pt as default};
